<options>
    <!-- xtp_tools -e dftgwbse options.xml -->
    <dftgwbse help="Electronic Excitations using GW-BSE">

        <molecule help="Input geometry .xyz" default="votca.xyz">votca.xyz</molecule>
        <mode help="Calculator mode: energy or optimize" default="energy">energy</mode>
        <basisset help="Basis set for MOs" default="def2-tzvp">def2-tzvp</basisset>
        <auxbasisset help="Auxiliary basis set for RI" default="aux-def2-tzvp">aux-def2-tzvp</auxbasisset>
        <functional help="functional name(s) according to LIBXC" default="XC_HYB_GGA_XC_PBEH">XC_HYB_GGA_XC_PBEH</functional>

        <dftpackage>
            <package>
                <name help="Name of the DFT package" default="xtp">xtp</name>
            </package>
        </dftpackage>

        <gwbse_engine>
            <tasks help="guess,input,dft,parse,gwbse" default="input,dft,parse,gwbse">input,dft,parse,gwbse</tasks>
            <gwbse_options>
                <gwbse>
	                <ranges help="default: all levels in RPA, 1:2*HOMO in QP and all in BSE; other options: factor,explicit">default</ranges>
	                <rpamax help="only needed, if ranges is factor or explicit, number of levels in rpa" default=""></rpamax>
	                <qpmin help="only needed, if ranges is factor or explicit, lowest MO to be used in GW" default="" ></qpmin>
	                <qpmax help="only needed, if ranges is factor or explicit, highest MO to be used in GW" default=""></qpmax>
	                <bsemin help="only needed, if ranges is factor or explicit, lowest MO to be used in BSE" default=""></bsemin>
	                <bsemax help="only needed, if ranges is factor or explicit, highest MO to be used in BSE" default=""></bsemax>
	                <vxc help="Exchange correlation functional computation for GW">
		                <grid help="grid quality xcoarse,coarse,medium,fine,xfine" default="medium">medium</grid>
	                </vxc>
	                <scissor_shift help="preshift unoccupied MOs by a constant for GW calculation" default="0.0" unit="hartree">0.0</scissor_shift>
	                <mode help="use single short (G0W0) or self-consistent GW (evGW)" default="evGW">evGW</mode>
	                <tasks help="tasks to do gw,singlets,triplets or all" default="gw,singlets">gw,singlets</tasks>
	                <sigma_integrator help="self-energy correlation integration method: ppm, exact" default="ppm">ppm</sigma_integrator>
	                <eta help="small parameter eta of the Green's function" default="1e-3">1e-3</eta>
	                <qp_solver help="QP equation solve method: fixedpoint, grid" default="grid">grid</qp_solver>
	                <qp_grid_steps help="number of QP grid points" default="1001">1001</qp_grid_steps>
	                <qp_grid_spacing help="spacing of QP grid points in Ha" default="0.001">0.001</qp_grid_spacing>
	                <exctotal help="maximum number of BSE states to calculate" default="30">30</exctotal>
	                <useTDA help="use TDA for BSE default `false`" default="0">0</useTDA>
	                <ignore_corelevels help="exclude core MO level from calculation on RPA,GW or BSE level" default="no">no</ignore_corelevels>
	                <eigensolver help="options for BSE eigenvalue decompostion">
		                <dodavidson help="use davidson solver" default="1">1</dodavidson>
		                <davidson_correction help="DPR or OHLSEN" default="DPR">DPR</davidson_correction>
		                <davidson_tolerance help="loose,normal,strict" default="strict">strict</davidson_tolerance>
		                <davidson_ortho help="orthogonalisation routine GS or QR" default="GS">GS</davidson_ortho>
		                <davidson_update help=" how large the search space can become min, safe, max" default="safe">safe</davidson_update>
		                <davidson_maxiter help="max iterations" default="50">50</davidson_maxiter>
		                <domatrixfree help="solve without explicitly setting up BSE matrix, (slower but a lot less memory required" default="0">0</domatrixfree>
	                </eigensolver>
	                <gw_sc_max_iterations help="Maximum number of iterations in gvGW" default="50">50</gw_sc_max_iterations>
	                <gw_mixing_order help="Mixing of QP energies in evGW - 0: plain, 1: linear, >1: Anderson" default="20">20</gw_mixing_order>
	                <g_sc_max_iterations help="What is this again?" default="100">100</g_sc_max_iterations>
	                <use_Hqp_offdiagonals help="Using symmetrized off-diagonal elements of QP Hamiltonian in BSE" default="false">false</use_Hqp_offdiagonals>
                </gwbse>
            </gwbse_options>
            <redirect_logger help="" default="0">0</redirect_logger>
        </gwbse_engine>

        <geometry_optimization help="geometry optimization options">
            <state help="initial state to optimize for" default="s1">s1</state>
            <statetracker help="tries to identify state without looking at the energy">
                <oscillatorstrength default="0.0001">0.001</oscillatorstrength>
            </statetracker>
            <convergence help="Convergence criteria for geometry optimization">
                <energy help="default: 1.e-6 Hartree" default="1.e-6">1.e-6</energy>
                <RMSForce help="default: 3.e-5 Hartree/Bohr" default="3.e-5">3.e-5</RMSForce>
                <MaxForce help="default: 1.e-4 Hartree/Bohr" default="1.e-4">1.e-4</MaxForce>
                <RMSStep help="default: 6.e-4 Bohr" default="6.e-4">6.e-4</RMSStep>
                <MaxStep help="default: 1.e-3 Bohr" default="1.e-3">1.e-3</MaxStep>
            </convergence>
            <optimizer help="optimiser method">
                <method default="BFGS-TRM">BFGS-TRM</method>
                <trust help="initial trustregion in Angstrom" default="0.01">0.01</trust>
            </optimizer>
            <forces>
                <method help="finite differences method, central or forward" default="central">central</method>
                <CoMforce_removal help="Remove total force on molecule" default="1">1</CoMforce_removal>
                <displacement help="default: 0.001 Angstrom" default="0.001">0.001</displacement>
            </forces>
        </geometry_optimization>
    </dftgwbse>

</options>
